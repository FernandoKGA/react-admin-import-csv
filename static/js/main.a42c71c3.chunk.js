(this["webpackJsonptest-ra"]=this["webpackJsonptest-ra"]||[]).push([[0],{398:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(995);Object.defineProperty(t,"es",{enumerable:!0,get:function(){return r.default}});var o=n(996);Object.defineProperty(t,"en",{enumerable:!0,get:function(){return o.default}});var a=n(997);Object.defineProperty(t,"cn",{enumerable:!0,get:function(){return a.default}})},467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleLogger=void 0;var r=function(){function e(e,t){this.prefix=e,this.debug=t,this.loggerID=Math.random().toString(32).slice(2,6)}return e.prototype.getLogString=function(){return"\ud83c\udf1f react-admin-import-csv:: "+this.prefix+" ["+this.loggerID+"] "},Object.defineProperty(e.prototype,"log",{get:function(){return this.debug?console.log.bind(console,this.getLogString()):function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"warn",{get:function(){return this.debug?console.warn.bind(console,this.getLogString()):function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.debug?console.error.bind(console,this.getLogString()):function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}},enumerable:!1,configurable:!0}),e.prototype.setEnabled=function(e){this.debug=e},e}();t.SimpleLogger=r},622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportButton=void 0;var r=n(10),o=n(708);Object.defineProperty(t,"ImportButton",{enumerable:!0,get:function(){return o.ImportButton}}),t.default=r.connect()(o.ImportButton)},698:function(e,t,n){e.exports=n(999)},708:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(t){a(t)}}function l(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(l){a=[6,l],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportButton=t.BtnOption=void 0;var l=i(n(0)),u=n(474),c=n(32),s=n(998),d=i(n(252)),f=n(467),p=n(967),m=n(993);t.BtnOption=function(e){return l.default.createElement(c.ListItem,{disableGutters:!0},l.default.createElement(c.Button,{style:{width:"100%",backgroundColor:"#efefef",padding:"13px"},onClick:e.onClick},e.icon,l.default.createElement("span",{style:{width:"100%",textAlign:"left",marginLeft:"8px"}},e.label)))},t.ImportButton=function(e){var n=u.useRefresh(),i=u.useTranslate(),h=u.useDataProvider(),v=e,b=v.logging,g=v.parseConfig,y=v.preCommitCallback,w=v.postCommitCallback,E=v.validateRow,C=e.variant,I=e.label,k=e.resource,O=e.resourceName,x=new f.SimpleLogger("import-csv-button",!0);if(x.setEnabled(b),!k)throw new Error(i("csv.error.emptyResource"));I||(I=i("csv.main.import")),C||(C="text"),O||(O=k);var S,_=l.default.useState(!1),P=_[0],j=_[1],D=l.default.useState(!1),B=D[0],A=D[1],T=l.default.useState(null),F=T[0],M=T[1],V=l.default.useState(null),L=V[0],R=V[1],G=l.default.useState(null),N=G[0],U=G[1],q=l.default.useState(null),z=q[0],W=q[1],J=l.default.useState(null),H=J[0],K=J[1];function Q(){j(!1),A(!1),M(null),R(null),U(null),K(null)}function X(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,m.create(b,h,O,e,y,w)]}))}))}function Y(e){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,m.update(b,h,O,e,y,w)]}))}))}var Z=u.useNotify(),$=function(){Q(),Z(i("csv.alert.imported",{fname:H})),n()},ee=function(){var e=Array.isArray(L)&&L.pop();R(L);var t=Array.isArray(F)&&F.filter((function(t){return t.id===e})).pop();return x.log("nextConflicting",{foundValue:t,currentId:e}),!t||W(t),t&&r({},t)};return l.default.createElement(l.default.Fragment,null,l.default.createElement(c.Tooltip,{title:i("csv.dialog.extension")},l.default.createElement("div",null,l.default.createElement(u.Button,{color:"primary",component:"span",variant:C,label:I,onClick:function(){Q(),S.value="",S.click()}},l.default.createElement(d.default,{style:{transform:"rotate(180deg)",fontSize:"20"}})),l.default.createElement("input",{ref:function(e){return S=e},type:"file",style:{display:"none"},onChange:function(e){return o(void 0,void 0,void 0,(function(){var t,n,r,o,l,u,c;return a(this,(function(a){switch(a.label){case 0:t=e.target.files&&e.target.files[0],K(t.name),j(!0),a.label=1;case 1:return a.trys.push([1,9,,10]),x.log("Parsing CSV file"),[4,p.GetCSVItems(b,i,t,g)];case 2:return n=a.sent(),M(n),x.log("Validating CSV file"),[4,p.CheckCSVValidation(b,i,n,E)];case 3:return a.sent(),x.log("Checking rows to import"),[4,p.GetIdsColliding(b,i,h,n,O)];case 4:return r=a.sent(),R(r),o=!!r.length,x.log("Is has colliding ids?",{hasCollidingIds:o,collidingIds:r}),o?(l=new Set(r.map((function(e){return e}))),u=n.filter((function(e){return!l.has(e.id)})),x.log("Importing items which arent colliding",{csvItemsNotColliding:u}),[4,X(u)]):[3,6];case 5:return a.sent(),[3,8];case 6:return[4,X(n)];case 7:a.sent(),$(),a.label=8;case 8:return[3,10];case 9:return c=a.sent(),Q(),x.error(c),[3,10];case 10:return[2]}}))}))},accept:".csv,.tsv"}))),l.default.createElement(c.Dialog,{open:P,onClose:$,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.default.createElement(c.DialogTitle,{id:"alert-dialog-title"},"Importing to ",O),l.default.createElement(c.DialogContent,null,l.default.createElement("div",{style:{width:"400px",maxWidth:"100%"}},l.default.createElement("p",{style:{fontFamily:"sans-serif",margin:"0",fontSize:"0.9em",marginBottom:"10px",marginTop:"-7px",color:"#555"}},"Importing ",F&&F.length," items from '",H,"' to"," ",O),N&&l.default.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},l.default.createElement(c.CircularProgress,{variant:"indeterminate"}),l.default.createElement("p",{style:{fontFamily:"sans-serif"}},"Loading...")),L&&L.length>0&&!N&&l.default.createElement("div",null,l.default.createElement("p",{style:{fontFamily:"sans-serif",margin:"0"}},"The resource ",l.default.createElement("strong",null,O)," has"," ",l.default.createElement("strong",null,L&&L.length)," ","records with the same Ids"),l.default.createElement(c.List,null,l.default.createElement(t.BtnOption,{onClick:function(){return o(void 0,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:x.log("handleReplace"),n.label=1;case 1:return n.trys.push([1,4,,5]),U(!0),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 2:return n.sent(),e=new Set(L.map((function(e){return e}))),[4,Y(F.filter((function(t){return e.has(t.id)})))];case 3:return n.sent(),$(),[3,5];case 4:return t=n.sent(),U(!1),x.error("handleReplace",t),[3,5];case 5:return[2]}}))}))},icon:l.default.createElement(s.Done,{htmlColor:"#29c130"}),label:"Replace the rows"}),l.default.createElement(t.BtnOption,{onClick:function(){x.log("handleSkip"),$()},icon:l.default.createElement(s.FileCopy,{htmlColor:"#3a88ca"}),label:"Skip these rows"}),l.default.createElement(t.BtnOption,{onClick:function(){return o(void 0,void 0,void 0,(function(){return a(this,(function(e){return x.log("handleAskDecide"),j(!1),ee(),A(!0),[2]}))}))},icon:l.default.createElement(s.Undo,{htmlColor:"black"}),label:"Let me decide for each row"})))))),l.default.createElement(c.Dialog,{open:B,onClose:$,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.default.createElement(c.DialogTitle,{id:"alert-dialog-title"},"Importing id ",z&&z.id," to ",O),l.default.createElement(c.DialogContent,null,l.default.createElement("div",{style:{width:"400px",maxWidth:"100%"}},l.default.createElement("p",{style:{fontFamily:"sans-serif",margin:"0",fontSize:"0.9em",marginBottom:"10px",marginTop:"-7px",color:"#555"}},"Importing ",F&&F.length," items from '",H,"' to"," ",O),N&&l.default.createElement("div",{style:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px"}},l.default.createElement(c.CircularProgress,{variant:"indeterminate"}),l.default.createElement("p",{style:{fontFamily:"sans-serif"}},"Loading...")),!N&&l.default.createElement("div",null,l.default.createElement("p",{style:{fontFamily:"sans-serif",margin:"0"}},"The resource ",l.default.createElement("strong",null,O)," has"," ",l.default.createElement("strong",null,L&&L.length+1)," ","more records with conflicting ids"),l.default.createElement(c.List,null,l.default.createElement(t.BtnOption,{onClick:function(){return o(void 0,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return x.log("handleAskDecideReplace"),(e=ee())?[4,Y([e])]:[2,$()];case 1:return t.sent(),[2]}}))}))},icon:l.default.createElement(s.Done,{htmlColor:"#29c130"}),label:"Replace the row id="+(z&&z.id)}),l.default.createElement(t.BtnOption,{onClick:function(){return o(void 0,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return x.log("handleAskDecideAddAsNew"),(e=ee())?(delete e.id,[4,X([e])]):[2,$()];case 1:return t.sent(),[2]}}))}))},icon:l.default.createElement(s.Add,{htmlColor:"#3a88ca"}),label:"Add as new row (Don't replace)"}),l.default.createElement(t.BtnOption,{onClick:function(){return o(void 0,void 0,void 0,(function(){var e;return a(this,(function(t){return x.log("handleAskDecideSkip"),(e=ee())?(X([e]),[2]):[2,$()]}))}))},icon:l.default.createElement(s.Undo,{htmlColor:"black"}),label:"Skip this row (Don't replace)"}),l.default.createElement(t.BtnOption,{onClick:function(){return o(void 0,void 0,void 0,(function(){return a(this,(function(e){return x.log("handleAskDecideSkipAll"),$(),[2]}))}))},icon:l.default.createElement(s.Clear,{htmlColor:"#3a88ca"}),label:"Cancel"})))))))}},967:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(t){a(t)}}function l(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(l){a=[6,l],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GetCSVItems=t.CheckCSVValidation=t.GetIdsColliding=void 0;var a=n(968),i=n(467);function l(e){var t=new i.SimpleLogger("import-controller",!0);return t.setEnabled(e),t}t.GetIdsColliding=function(e,t,n,a,i){return r(this,void 0,void 0,(function(){var r,u,c,s;return o(this,(function(o){switch(o.label){case 0:if(r=l(e),!a.some((function(e){return e.id})))return[2,[]];o.label=1;case 1:return o.trys.push([1,3,,4]),u=a.filter((function(e){return!!e.id})).map((function(e){return e.id+""})),[4,n.getMany(i,{ids:u})];case 2:return c=o.sent(),[2,c.data.map((function(e){return e.id+""}))];case 3:throw s=o.sent(),r.error("GetIdsColliding",{csvValues:a},s),t("csv.error.csvInvalidUser");case 4:return[2]}}))}))},t.CheckCSVValidation=function(e,t,n,a){return r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:if(r=l(e),!a)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(n.map((function(e){return a(e)})))];case 2:return o.sent(),[3,4];case 3:throw i=o.sent(),r.error("onFileAdded",{csvValues:n},i),t("csv.error.csvInvalidUser");case 4:return[2]}}))}))},t.GetCSVItems=function(e,t,n,i){return r(this,void 0,void 0,(function(){var r,u;return o(this,(function(o){switch(o.label){case 0:r=l(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a.processCsvFile(n,i)];case 2:return[2,o.sent()];case 3:throw u=o.sent(),r.error("onFileAdded",{csvValues:void 0},u),t("csv.error.csvInvalid");case 4:return[2]}}))}))}},968:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(t){a(t)}}function l(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(l){a=[6,l],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.processCsvData=t.getCsvData=t.processCsvFile=void 0;var l=n(969),u=i(n(970)),c=i(n(992)),s=function(e,t,n){var r=u.default(t.split("."));return c.default(r,(function(){return n}),e||{})};function d(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){var n;return a(this,(function(o){return n={},!!t&&"object"===typeof t&&(n=t),[2,new Promise((function(t,o){return l.parse(e,r(r({delimiter:",",skipEmptyLines:!0},n),{complete:function(e){return t(e.data)},error:function(e){return o(e)}}))}))]}))}))}function f(e){if(Array.isArray(e[0])){var t=e[0];return e.slice(1).map((function(e){var n={};return t.forEach((function(t,r){n=s(n,t,e[r])})),n}))}var n=[];return e.forEach((function(e){var t={};for(var r in e)t=s(t,r,e[r]);n.push(t)})),n}t.processCsvFile=function(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return e?[4,d(e,t)]:[2];case 1:return[2,f(n.sent())]}}))}))},t.getCsvData=d,t.processCsvData=f},993:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(t){a(t)}}function l(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(l){a=[6,l],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.create=void 0;var a=new(n(467).SimpleLogger)("uploader",!1);function i(e,t,n,i){return r(this,void 0,void 0,(function(){var r,u,c;return o(this,(function(o){switch(o.label){case 0:a.setEnabled(e),a.log("addInDataProvider",{dataProvider:t,resource:n,values:i}),r=[],o.label=1;case 1:return o.trys.push([1,3,,8]),[4,t.createMany(n,{data:i})];case 2:return o.sent(),[3,8];case 3:if(u=o.sent(),!u.toString().includes("Unknown dataProvider"))return[3,7];a.log("addInDataProvider","createMany not found on provider: using fallback"),o.label=4;case 4:return o.trys.push([4,6,,7]),[4,l(t,n,i)];case 5:return o.sent(),[3,7];case 6:return c=o.sent(),a.error("addInDataProvider",c),[3,7];case 7:return[3,8];case 8:return[2,r]}}))}))}function l(e,t,n){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){switch(o.label){case 0:return r=[],[4,Promise.all(n.map((function(n){return e.create(t,{data:n}).then((function(e){return r.push({value:n,success:!0,response:e})})).catch((function(e){return r.push({value:n,success:!1,err:e})}))})))];case 1:return o.sent(),[2,r]}}))}))}function u(e,t,n,i){return r(this,void 0,void 0,(function(){var r,l;return o(this,(function(o){switch(o.label){case 0:return r=i.map((function(e){return e.id})),a.setEnabled(e),a.log("updateInDataProvider",{dataProvider:t,resource:n,values:i,logging:e,ids:r}),l=[],[4,t.updateMany(n,{ids:r,data:i}).then((function(e){return l.push({value:i,success:!0,response:e})})).catch((function(e){return l.push({value:i,success:!1,err:e})}))];case 1:return o.sent(),[2,l]}}))}))}t.create=function(e,t,n,a,l,u){return r(this,void 0,void 0,(function(){var r,c;return o(this,(function(o){switch(o.label){case 0:return r=l?l("create",a):a,[4,i(e,t,n,r)];case 1:return c=o.sent(),u&&u(c),!u&&c.some((function(e){return!e.success}))?[2,Promise.reject(c.map((function(e){return e.response})))]:[2]}}))}))},t.update=function(e,t,n,a,i,l){return r(this,void 0,void 0,(function(){var r,c;return o(this,(function(o){switch(o.label){case 0:return r=i?i("create",a):a,[4,u(e,t,n,r)];case 1:return c=o.sent(),l&&l(c),!l&&c.some((function(e){return!e.success}))?[2,Promise.reject(c.map((function(e){return e.response})))]:[2]}}))}))}},995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={csv:{main:{import:"Importar"},error:{noId:"Sobrescribir requiere el campo 'id'",hasId:"Crear no debe incluir el campo 'id'",importing:"Error al importar",emptyResource:"La propiedad 'resource' esta vacia. \xbfFue pasada {...props} al componente `ImportButton`?"},alert:{imported:"Importado %{filename}"},dialog:{importTo:"Importar para",dataFileReq:"Requisitos del archivo",extension:"Debe ser un archivo '.csv' o '.tsv'",idColumnCreate:"No debe contener una columna 'id' para nuevo",idColumnUpdate:"Debe contener una columna 'id' para sobrescribir",chooseFile:"Elija Archivo",processed:"Procesado",rowCount:"Cuenta de filas",cancel:"Cancelar",importNew:"Importar nuevo",importOverride:"Importar y sobrescribir "}}}},996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={csv:{main:{import:"Import"},error:{csvInvalid:"The CSV is invalid",csvInvalidUser:"The CSV failed validation",noId:"Overwrite requires field 'id'",hasId:"Create should not include field 'id'",importing:"Error importing",emptyResource:"The 'resource' property was empty, did you pass in the {...props} to the ImportButton?"},alert:{imported:"Imported %{fname}"},dialog:{importTo:'Importing %{count} items to "%{resource}"',copyOverwriteWarning:"The destination %{resource} has %{count} with the same id",dataFileReq:"Data file requirements",extension:"Must be a '.csv' or '.tsv' file",idColumnCreate:"Must not contain an 'id' column for new",idColumnUpdate:"Must contain an 'id' column for overwrite",chooseFile:"Choose File",processed:"Processed",rowCount:"Row Count",cancel:"Cancel",importNew:"Import as New",importOverride:"Import as Overwrite "}}}},997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={csv:{main:{import:"\u5bfc\u5165"},error:{noId:"\u8986\u76d6\u66f4\u65b0\u8bb0\u5f55\u65f6\uff0c\u5fc5\u987b\u5305\u542b'id'\u5b57\u6bb5",hasId:"\u521b\u5efa\u65b0\u8bb0\u5f55\u65f6\uff0c\u4e0d\u80fd\u5305\u542bid\u5b57\u6bb5",importing:"\u5bfc\u5165\u65f6\u53d1\u751f\u9519\u8bef",emptyResource:"'resource' \u5c5e\u6027\u4e3a\u7a7a,\u4f60\u662f\u5426\u5c06{...props}\u8bbe\u7f6e\u5230ImportButton\u4e86?"},alert:{imported:"\u5bfc\u5165\u5b8c\u6210 %{filename}"},dialog:{importTo:"\u5bfc\u5165\u5230",dataFileReq:"\u6570\u636e\u6587\u4ef6\u8981\u6c42",extension:"\u5bfc\u5165\u53ea\u652f\u6301'.csv' \u6216 '.tsv'\u7684\u6587\u4ef6\u7c7b\u578b",idColumnCreate:"\u65b0\u589e\u65f6\u4e0d\u80fd\u5305\u542b'id'\u7684\u5217",idColumnUpdate:"\u66f4\u65b0\u65f6\u5fc5\u987b\u5305\u542b'id'\u7684\u5217",chooseFile:"\u9009\u62e9\u6587\u4ef6",processed:"\u5904\u7406",rowCount:"\u8bb0\u5f55\u5408\u8ba1",cancel:"\u53d6\u6d88",importNew:"\u65b0\u589e\u5bfc\u5165",importOverride:"\u66f4\u65b0\u5bfc\u5165 "}}}},999:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(20),i=n.n(a),l=n(172),u=n(245),c=n(600),s=n(611),d=n(591),f=n(397),p=n(673),m=n(506),h=n.n(m),v=n(621),b=n(92),g=n(610),y=n(195),w=n(99),E=n(499),C=n(496),I=n(495),k=n(158),O=n(341),x=n(293),S=n(339),_=n(81),P=n(157),j=n(622),D=n(494),B=n(497),A=function(e){var t=e.className,n=e.basePath,o=e.total,a=e.resource,i=e.currentSort,l=e.filterValues,u=e.exporter,c={logging:!0,validateRow:function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.id;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};return r.createElement(b.a,{className:t},r.createElement(D.a,{basePath:n}),r.createElement(B.a,{disabled:0===o,resource:a,sort:i,filter:l,exporter:u}),r.createElement(j.ImportButton,Object.assign({},e,c)))},T=function(e){return r.createElement(g.a,Object.assign({},e,{actions:r.createElement(A,null)}),r.createElement(y.a,null,r.createElement(w.a,{source:"id"}),r.createElement(w.a,{source:"title"}),r.createElement(E.a,{label:""}),r.createElement(C.a,{label:""}),r.createElement(I.a,{label:"",redirect:!1})))},F=function(e){return r.createElement(k.b,e,r.createElement(O.a,null,r.createElement(w.a,{source:"id"}),r.createElement(w.a,{source:"title"})))},M=function(e){return r.createElement(x.b,e,r.createElement(S.a,null,r.createElement(_.a,{source:"id"}),r.createElement(_.a,{source:"title"})))},V=function(e){return r.createElement(P.b,e,r.createElement(S.a,null,r.createElement(_.a,{disabled:!0,source:"id"}),r.createElement(_.a,{source:"title"})))},L=n(396),R=n(671),G=n.n(R),N=n(672),U=n.n(N),q=n(398),z=function(){var e=Object(p.a)({posts:[{id:0,title:"Hello, world!"},{id:1,title:"FooBar"},{id:2,title:"Another"},{id:3,title:"Thing"}]}),t=Object(u.a)(),n={en:Object(l.a)(Object(l.a)({},L.a),q.en),cn:Object(l.a)(Object(l.a)({},U.a),q.cn),es:Object(l.a)(Object(l.a)({},G.a),q.es)},r=Object(f.a)((function(e){return n[e]?n[e]:n.en}),t||Object(c.b)());return o.a.createElement(s.a,{dataProvider:e,i18nProvider:r},o.a.createElement(d.a,{name:"posts",list:T,show:F,edit:V,create:M}))};i.a.render(o.a.createElement(z,null),document.getElementById("root"))}},[[698,1,2]]]);
//# sourceMappingURL=main.a42c71c3.chunk.js.map