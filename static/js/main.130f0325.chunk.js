(this["webpackJsonptest-ra"]=this["webpackJsonptest-ra"]||[]).push([[0],{588:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImportButton=void 0;var n=r(10),a=r(665);Object.defineProperty(t,"ImportButton",{enumerable:!0,get:function(){return a.ImportButton}}),t.default=n.connect()(a.ImportButton)},656:function(e,t,r){e.exports=r(954)},665:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&a(t,e,r);return o(t,e),t},l=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(t){o(t)}}function l(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportButton=void 0;var s=c(r(0)),f=r(290),d=c(r(247)),p=r(290),m=r(924),v=r(949),h=c(r(487)),b=c(r(950)),y=i(r(951)),g=c(r(488)),w=r(39);t.ImportButton=function(e){var t={es:n(n({},b.default),y.es),en:n(n({},h.default),y.en)},r=g.default((function(e){return t[e]?t[e]:t.en}),f.resolveBrowserLocale()),a=e,o=a.parseConfig,i=a.logging,c=a.postCommitCallback,E=a.preCommitCallback,_=a.disableImportNew,C=a.disableImportOverwrite,O=e.variant,I=e.label,P=e.resource,x=e.resourceName;if(i&&console.log({props:e}),!P)throw new Error(r.translate("csv.error.emptyResource"));I||(I=r.translate("csv.main.import")),O||(O="text"),x||(x=P);var j=s.default.useState(!1),k=j[0],B=j[1],D=s.default.useState(!1),S=D[0],M=D[1],F=s.default.useState(null),N=F[0],R=F[1],T=s.default.useState(null),q=T[0],A=T[1],z=s.default.useState(null),G=z[0],L=z[1],U=f.useRefresh(),J=function(){B(!1),M(!1),R(null),A(null)},H=function(e){void 0===e&&(e=!1),J(),e||(K(r.translate("csv.alert.imported")+" "+N),U()),e&&K(r.translate("csv.error.importing")+" "+N+", "+e,"error")},K=p.useNotify(),Q=p.useDataProvider();return s.default.createElement(s.default.Fragment,null,s.default.createElement(f.Button,{color:"primary",component:"span",variant:O,label:I,onClick:function(){B(!0)}},s.default.createElement(d.default,{style:{transform:"rotate(180deg)",fontSize:"20"}})),s.default.createElement(w.Dialog,{open:k,onClose:J,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.default.createElement(w.DialogTitle,{id:"alert-dialog-title"},r.translate("csv.dialog.importTo"),' "',x,'"'),s.default.createElement(w.DialogContent,null,s.default.createElement("div",{id:"alert-dialog-description",style:{fontFamily:"sans-serif"}},s.default.createElement("p",{style:{margin:"0px"}},r.translate("csv.dialog.dataFileReq")),s.default.createElement("ol",null,s.default.createElement("li",null,r.translate("csv.dialog.extension")),s.default.createElement("li",null,r.translate("csv.dialog.idColumnCreate")),s.default.createElement("li",null,r.translate("csv.dialog.idColumnUpdate"))),s.default.createElement(w.Button,{variant:"contained",component:"label"},s.default.createElement("span",null,r.translate("csv.dialog.chooseFile")),s.default.createElement(d.default,{style:{transform:"rotate(180deg)",fontSize:"20"}}),s.default.createElement("input",{type:"file",style:{display:"none"},onChange:function(e){return l(void 0,void 0,void 0,(function(){var t,r,n;return u(this,(function(a){switch(a.label){case 0:t=e.target.files&&e.target.files[0],R(t.name),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,m.processCsvFile(t,o)];case 2:return r=a.sent(),i&&console.log({values:r}),A(r),L(null),[3,4];case 3:return n=a.sent(),console.error(n),A(null),L(n.toString()),[3,4];case 4:return[2]}}))}))},accept:".csv,.tsv,.txt"})),!!N&&s.default.createElement("p",{style:{marginBottom:"0px"}},r.translate("csv.dialog.processed"),": ",s.default.createElement("strong",null,N)),!!q&&s.default.createElement("p",{style:{margin:"0px"}},r.translate("csv.dialog.rowCount"),": ",s.default.createElement("strong",null,q.length)),!!G&&s.default.createElement("p",{style:{margin:"0px",color:"red"}},G))),s.default.createElement(w.DialogActions,null,s.default.createElement(w.Button,{onClick:J},s.default.createElement("span",null,r.translate("csv.dialog.cancel"))),s.default.createElement(w.Button,{disabled:!q||S||_,onClick:function(){return l(void 0,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:M(!0),t.label=1;case 1:if(t.trys.push([1,3,,4]),q.some((function(e){return e.id})))throw new Error(r.translate("csv.error.hasId"));return E&&A(E("create",q)),[4,v.create(Q,P,q,c)];case 2:return t.sent(),H(),[3,4];case 3:return e=t.sent(),H(e),[3,4];case 4:return[2]}}))}))},color:"secondary",variant:"contained"},S&&s.default.createElement(w.CircularProgress,{size:18,thickness:2}),s.default.createElement("span",null,r.translate("csv.dialog.importNew"))),s.default.createElement(w.Button,{disabled:!q||S||C,onClick:function(){return l(void 0,void 0,void 0,(function(){return u(this,(function(e){M(!0);try{if(q.some((function(e){return!e.id})))throw new Error(r.translate("csv.error.noId"));E&&A(E("overwrite",q)),v.update(Q,P,q,c).then((function(){return H()})).catch((function(e){return H(e)}))}catch(t){H(t)}return[2]}))}))},color:"primary",variant:"contained"},S&&s.default.createElement(w.CircularProgress,{size:18,thickness:2}),s.default.createElement("span",null,r.translate("csv.dialog.importOverride"))))))}},924:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(t){o(t)}}function l(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.processCsvData=t.getCsvData=t.processCsvFile=void 0;var l=r(925),u=i(r(926)),c=i(r(948)),s=function(e,t,r){var n=u.default(t.split("."));return c.default(n,(function(){return r}),e||{})};function f(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){var r;return o(this,(function(a){return r={},!!t&&"object"===typeof t&&(r=t),[2,new Promise((function(t,a){return l.parse(e,n(n({delimiter:",",skipEmptyLines:!0},r),{complete:function(e){return t(e.data)},error:function(e){return a(e)}}))}))]}))}))}function d(e){if(Array.isArray(e[0])){var t=e[0];return e.slice(1).map((function(e){var r={};return t.forEach((function(t,n){r=s(r,t,e[n])})),r}))}var r=[];return e.forEach((function(e){var t={};for(var n in e)t=s(t,n,e[n]);r.push(t)})),r}t.processCsvFile=function(e,t){return void 0===t&&(t={}),a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return e?[4,f(e,t)]:[2];case 1:return[2,d(r.sent())]}}))}))},t.getCsvData=f,t.processCsvData=d},949:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function i(e){try{u(n.next(e))}catch(t){o(t)}}function l(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(l){o=[6,l],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.create=void 0,t.create=function(e,t,r,i){return void 0===i&&(i=null),a(this,void 0,void 0,(function(){var a;return o(this,(function(o){switch(o.label){case 0:return i?(a=[],[4,Promise.all(r.map((function(r){return e.create(t,{data:r}).then((function(){return a.push(n(n({},r),{success:!0}))})).catch((function(e){return a.push(n(n({},r),{success:!1,err:e}))}))}))).finally((function(){return i(a)}))]):[3,2];case 1:return o.sent(),[2];case 2:return[2,Promise.all(r.map((function(r){return e.create(t,{data:r})})))]}}))}))},t.update=function(e,t,r,i){return void 0===i&&(i=null),a(this,void 0,void 0,(function(){var a;return o(this,(function(o){switch(o.label){case 0:return i?(a=[],[4,Promise.all(r.map((function(r){return e.update(t,{id:r.id,data:r}).then((function(){return a.push(n(n({},r),{success:!0}))})).catch((function(e){return a.push(n(n({},r),{success:!1,err:e}))}))}))).finally((function(){return i(a)}))]):[3,2];case 1:return o.sent(),[2];case 2:return[2,Promise.all(r.map((function(r){return e.update(t,{id:r.id,data:r})})))];case 3:return[2]}}))}))}},951:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.es=t.en=void 0;var a=n(r(952));t.en=a.default;var o=n(r(953));t.es=o.default},952:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={csv:{main:{import:"Import"},error:{noId:"Overwrite requires field 'id'",hasId:"Create should not include field 'id'",importing:"Error importing",emptyResource:"The 'resource' property was empty, did you pass in the {...props} to the ImportButton?"},alert:{imported:"Imported"},dialog:{importTo:"Import to",dataFileReq:"Data file requirements",extension:"Must be a '.csv' or '.tsv' file",idColumnCreate:"Must not contain an 'id' column for new",idColumnUpdate:"Must contain an 'id' column for overwrite",chooseFile:"Choose File",processed:"Processed",rowCount:"Row Count",cancel:"Cancel",importNew:"Import as New",importOverride:"Import as Overwrite "}}}},953:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={csv:{main:{import:"Importar"},error:{noId:"Sobrescribir requiere el campo 'id'",hasId:"Crear no debe incluir el campo 'id'",importing:"Error al importar",emptyResource:"La propiedad 'resource' esta vacia. \xbfFue pasada {...props} al componente `ImportButton`?"},alert:{imported:"Importado "},dialog:{importTo:"Importar para",dataFileReq:"Requisitos del archivo",extension:"Debe ser un archivo '.csv' o '.tsv'",idColumnCreate:"No debe contener una columna 'id' para nuevo",idColumnUpdate:"Debe contener una columna 'id' para sobrescribir",chooseFile:"Elija Archivo",processed:"Procesado",rowCount:"Cuenta de filas",cancel:"Cancelar",importNew:"Importar nuevo",importOverride:"Importar y sobrescribir "}}}},954:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(20),i=r.n(o),l=r(579),u=r(567),c=r(634),s=r(90),f=r(578),d=r(198),p=r(97),m=r(483),v=r(480),h=r(479),b=r(158),y=r(334),g=r(286),w=r(332),E=r(96),_=r(157),C=r(588),O=r(478),I=function(e){var t=e.className,r=e.basePath,a={logging:!0,postCommitCallback:function(e){return console.log("Report",e)},disableImportNew:!1,disableImportOverwrite:!1};return n.createElement(s.a,{className:t},n.createElement(O.a,{basePath:r}),n.createElement(C.ImportButton,Object.assign({},e,a)))},P=function(e){return n.createElement(f.a,Object.assign({},e,{actions:n.createElement(I,null)}),n.createElement(d.a,null,n.createElement(p.a,{source:"id"}),n.createElement(p.a,{source:"title"}),n.createElement(m.a,{label:""}),n.createElement(v.a,{label:""}),n.createElement(h.a,{label:"",redirect:!1})))},x=function(e){return n.createElement(b.b,e,n.createElement(y.a,null,n.createElement(p.a,{source:"id"}),n.createElement(p.a,{source:"title"})))},j=function(e){return n.createElement(g.b,e,n.createElement(w.a,null,n.createElement(E.a,{source:"id"}),n.createElement(E.a,{source:"title"})))},k=function(e){return n.createElement(_.b,e,n.createElement(w.a,null,n.createElement(E.a,{disabled:!0,source:"id"}),n.createElement(E.a,{source:"title"})))},B=Object(c.a)({posts:[{id:0,title:"Hello, world!"},{id:1,title:"FooBar"},{id:2,title:"Another"},{id:3,title:"Thing"}]}),D=function(){return a.a.createElement(l.a,{dataProvider:B},a.a.createElement(u.a,{name:"posts",list:P,show:x,edit:k,create:j}))};i.a.render(a.a.createElement(D,null),document.getElementById("root"))}},[[656,1,2]]]);
//# sourceMappingURL=main.130f0325.chunk.js.map